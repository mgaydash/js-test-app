<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<script src="../js/jquery-1.7.2.min.js" type="text/javascript"></script>
		<script src="../js/menubuilder.js" type="text/javascript"></script>
		<script src="../js/pubsub.js" type="text/javascript"></script>
		<link href="../css/test.css" rel="stylesheet" type="text/css" />
		<title>
			mobile menu
		</title>
		<script>
			jQuery(document).ready(function(){
				menubuilder();
				var menu = MobileMenu();
				menu.addButton("test", function(){alert("test");});
				menu.addSpace(100);
				menu.addButton("test2", function(){
					menu.showFullScreen();
				});
			});

			var MobileMenu = function(){
				var that = {};

				var makeBtnLr = function(){
					return $("<div>").css({
						"-moz-box-sizing":"border-box",
						"-webkit-box-sizing":"border-box",
						"box-sizing":"border-box",
						"background-color":"white",
						"border": "1px solid black",
						"font-family":"sans-serif",
						"font-size":"30px",
						"height":"50px",
						"margin":"10% 0 0 10%",
						"padding":"8px 0 0 0",
						"text-align":"center",
						"width":"80%"
					});
				};

				var makeFullScreenLr = function(){
					return $("<div>").css({
						"-moz-box-sizing":"border-box",
						"-webkit-box-sizing":"border-box",
						"box-sizing":"border-box",
						"height":"100%",
						"left":"200px",
						"position":"absolute",
						"top":"0px",
						"width":"80%"
					});	
				};

				var makeHandleLr = function(){
					return $("<div>").css({
						"-moz-box-sizing":"border-box",
						"-webkit-box-sizing":"border-box",
						"box-sizing":"border-box",
						"background-color":"white",
						"border-bottom": "1px solid black",
						"border-right": "1px solid black",
						"border-top": "1px solid black",
						"cursor":"pointer",
						"font-size":"30px",
						"height":"100px",
						"left":"0px",
						"padding-top":"15px",
						"position":"absolute",
						"text-align":"center",
						"top":"150px",
						"width":"40px"
					}).on("click.mobilemenu", function(){
						body.append(modal);
					}).html("&gt;<br>&gt;");
				};


				var makeMenuLr = function(){
					return $("<div>").css({
						"-moz-box-sizing":"border-box",
						"-webkit-box-sizing":"border-box",
						"box-sizing":"border-box",
						"background-color":"white",
						"border-right":"1px solid black",
						"height":"100%",
						"left":"0px",
						"position":"absolute",
						"width":"200px",
						"top":"0px"
					});
				};

				var makeModal = function(){
					return $("<div>").css({
						"-moz-box-sizing":"border-box",
						"-webkit-box-sizing":"border-box",
						"box-sizing":"border-box",
						"height":"100%",
						"left":"0px",
						"position":"absolute",
						"top":"0px",
						"width":"100%"
					}).on("click.mobilemenu", function(){
						modal.detach();
					});
				};

				that.addButton = function(text, callback){
					menu.append(makeBtnLr().html(text).on("click.mobilemenu", function(e){
						callback(e);
						e.stopPropagation();
					}));
				};

				that.addSpace = function(size){
					menu.append($("<div>").css({
						"width":"100%",
						"height":size + "px"
					}));
				};

				// that.hide = function(){

				// };

				// that.show = function(){

				// };

				that.showFullScreen = function(html){
					// fs.html(html);
					// modal.append(fs);
					fs.html(
						$("<div>").html(
							$("<button>Close</button>").click(function(){
								fs.html("");
							}).css("width", "100%")
						).css("width", "100%")
					);
				};

				var body = $("body");
				var modal = makeModal();
				var menu = makeMenuLr();
				var fs = makeFullScreenLr();

				modal.append(menu);
				modal.append(fs);

				body.append(makeHandleLr());

				return that;
			};
		</script>
		<style>
		</style>
	</head>
	<body style="background-image:url('../images/geocities.gif');">
	</body>
</html>